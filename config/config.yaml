# IM Server Configuration

server:
  # 服务器名称
  name: "IM-Server"
  # 运行模式: debug, release
  mode: "debug"
  # HTTP API 端口
  http_port: 8080
  # WebSocket 端口
  ws_port: 8081
  # TCP 端口
  tcp_port: 8082

# 数据库配置
database:
  # 数据库类型: mysql, postgres
  type: "postgres"
  host: "localhost"
  port: 5432
  user: "imserver"
  password: "imserver123"
  dbname: "im_db"
  # 最大连接数
  max_open_conns: 100
  # 最大空闲连接数
  max_idle_conns: 10
  # 连接最大生命周期（分钟）
  conn_max_lifetime: 60

# Redis 配置
redis:
  host: "localhost"
  port: 6379
  password: ""
  # 数据库索引
  db: 0
  # 连接池大小
  pool_size: 100

# 日志配置
logger:
  # 日志级别: debug, info, warn, error
  level: "debug"
  # 日志格式: json, console
  format: "console"
  # 日志输出路径
  output: "logs/im-server.log"
  # 是否输出到控制台
  console: true

# 认证配置
auth:
  # JWT 密钥
  jwt_secret: "your-secret-key-change-in-production"
  # Token 过期时间（小时）
  token_expire_hours: 720  # 30 days

# 消息配置
message:
  # 单次批量拉取消息数量
  batch_size: 100
  # 消息最大长度（字节）
  max_length: 10240  # 10KB
  # 离线消息保存天数
  offline_days: 30

# 连接配置
connection:
  # 心跳间隔（秒）
  heartbeat_interval: 30
  # 心跳超时（秒）
  heartbeat_timeout: 90
  # 读取超时（秒）
  read_timeout: 60
  # 写入超时（秒）
  write_timeout: 60
  # 最大消息大小（字节）
  max_message_size: 65536  # 64KB

# 限流配置
rate_limit:
  # 是否启用
  enabled: true
  # 每秒请求数
  requests_per_second: 100
  # 突发请求数
  burst: 200

